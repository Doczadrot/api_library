# Generated by Django 5.2.6 on 2025-09-23 13:39

import django.core.validators
import django.db.models.deletion
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('library', '0002_alter_book_isbn'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.AlterModelOptions(
            name='author',
            options={'ordering': ['name'], 'verbose_name': 'Автор', 'verbose_name_plural': 'Авторы'},
        ),
        migrations.AlterModelOptions(
            name='book',
            options={'ordering': ['title'], 'verbose_name': 'Книга', 'verbose_name_plural': 'Книги'},
        ),
        migrations.AlterModelOptions(
            name='bookitem',
            options={'ordering': ['barcode'], 'verbose_name': 'Экземпляр книги', 'verbose_name_plural': 'Экземпляры книг'},
        ),
        migrations.AlterModelOptions(
            name='borrowing',
            options={'verbose_name': 'Выдача книги (устарело)', 'verbose_name_plural': 'Выдачи книг (устарело)'},
        ),
        migrations.AlterField(
            model_name='author',
            name='description',
            field=models.TextField(blank=True, help_text='Краткая биография или описание автора', null=True, verbose_name='Описание'),
        ),
        migrations.AlterField(
            model_name='author',
            name='name',
            field=models.CharField(help_text='Полное имя автора (Фамилия Имя Отчество)', max_length=255, verbose_name='Имя автора'),
        ),
        migrations.AlterField(
            model_name='book',
            name='author',
            field=models.ManyToManyField(help_text='Авторы данной книги', related_name='books', to='library.author', verbose_name='Авторы'),
        ),
        migrations.AlterField(
            model_name='book',
            name='isbn',
            field=models.CharField(help_text='Международный стандартный номер книги', max_length=100, unique=True, validators=[django.core.validators.RegexValidator(message='Введите корректный ISBN номер', regex='^(?:ISBN(?:-1[03])?:? )?(?=[0-9X]{10}$|(?=(?:[0-9]+[- ]){3})[- 0-9X]{13}$|97[89][0-9]{10}$|(?=(?:[0-9]+[- ]){4})[- 0-9]{17}$)(?:97[89][- ]?)?[0-9]{1,5}[- ]?[0-9]+[- ]?[0-9]+[- ]?[0-9X]$')], verbose_name='ISBN'),
        ),
        migrations.AlterField(
            model_name='book',
            name='page_counts',
            field=models.IntegerField(blank=True, help_text='Общее количество страниц в книге', null=True, validators=[django.core.validators.MinValueValidator(1, message='Количество страниц должно быть больше 0')], verbose_name='Количество страниц'),
        ),
        migrations.AlterField(
            model_name='book',
            name='subject',
            field=models.CharField(help_text='Тематическая категория или жанр книги', max_length=127, verbose_name='Тема'),
        ),
        migrations.AlterField(
            model_name='book',
            name='title',
            field=models.CharField(help_text='Полное название книги', max_length=255, verbose_name='Название'),
        ),
        migrations.AlterField(
            model_name='bookitem',
            name='barcode',
            field=models.CharField(help_text='Уникальный штрих-код для идентификации экземпляра', max_length=15, unique=True, validators=[django.core.validators.RegexValidator(message='Штрих-код должен состоять из 13 цифр', regex='^[0-9]{13}$')], verbose_name='Штрих-код'),
        ),
        migrations.AlterField(
            model_name='bookitem',
            name='book',
            field=models.ForeignKey(help_text='Книга, к которой относится данный экземпляр', on_delete=django.db.models.deletion.CASCADE, related_name='book_items', to='library.book', verbose_name='Книга'),
        ),
        migrations.AlterField(
            model_name='bookitem',
            name='publication_date',
            field=models.DateField(help_text='Дата публикации данного издания', verbose_name='Дата публикации'),
        ),
        migrations.AlterField(
            model_name='bookitem',
            name='status',
            field=models.CharField(choices=[('A', 'Доступна'), ('B', 'Выдана'), ('R', 'Зарезервирована'), ('L', 'Утеряна')], default='A', help_text='Текущий статус экземпляра книги', max_length=1, verbose_name='Статус'),
        ),
        migrations.AlterField(
            model_name='borrowing',
            name='book',
            field=models.ForeignKey(help_text='УСТАРЕЛО: Используйте BorrowedBook.book_item', on_delete=django.db.models.deletion.CASCADE, to='library.bookitem', verbose_name='Экземпляр книги'),
        ),
        migrations.AlterField(
            model_name='borrowing',
            name='borrow_date',
            field=models.DateTimeField(auto_now_add=True, help_text='УСТАРЕЛО: Используйте BorrowedBook.borrowed_date', verbose_name='Дата выдачи'),
        ),
        migrations.AlterField(
            model_name='borrowing',
            name='return_date',
            field=models.DateTimeField(blank=True, help_text='УСТАРЕЛО: Логика возврата изменена в BorrowedBook', null=True, verbose_name='Дата возврата'),
        ),
        migrations.AlterField(
            model_name='borrowing',
            name='user',
            field=models.ForeignKey(help_text='УСТАРЕЛО: Используйте BorrowedBook.borrower', on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL, verbose_name='Пользователь'),
        ),
        migrations.AddIndex(
            model_name='author',
            index=models.Index(fields=['name'], name='library_aut_name_b2f398_idx'),
        ),
        migrations.AddIndex(
            model_name='book',
            index=models.Index(fields=['title'], name='library_boo_title_c38ef2_idx'),
        ),
        migrations.AddIndex(
            model_name='book',
            index=models.Index(fields=['isbn'], name='library_boo_isbn_951e8b_idx'),
        ),
        migrations.AddIndex(
            model_name='book',
            index=models.Index(fields=['subject'], name='library_boo_subject_09fe7c_idx'),
        ),
        migrations.AddIndex(
            model_name='bookitem',
            index=models.Index(fields=['barcode'], name='library_boo_barcode_f8e9e7_idx'),
        ),
        migrations.AddIndex(
            model_name='bookitem',
            index=models.Index(fields=['status'], name='library_boo_status_674758_idx'),
        ),
        migrations.AddIndex(
            model_name='bookitem',
            index=models.Index(fields=['publication_date'], name='library_boo_publica_0b61c2_idx'),
        ),
        migrations.AlterModelTable(
            name='borrowing',
            table='library_borrowing_deprecated',
        ),
    ]
